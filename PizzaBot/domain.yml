version: "3.1"

intents:
#General
  - welcome_greet
  - goodbye
  - help
  - response_negative
  - response_positive
  - out_of_scope

#TASK 1 order pizza
  - init_request
  - init_drink_request
  - say_drink_order
  - ask_drink_list
  - ask_drink_price
#  - init_request_with_entity
  - say_pizza_type
  - say_pizza_size
  - inform_order_delivery
  - inform_order_pickup
  - say_order_time
  - say_full_name
#  - response_phone
#  - response_address
#
##TASK 2 ask for pizza info and suggestion
  - ask_pizza_menu
  - ask_pizza_price
  - ask_pizza_ingredients
#  - ask_pizza_suggestion
#  - pizza_suggestion_ingredient
#  - pizza_suggestion_without_ingredient
#
#
##TASK 3 modify previously made order
  - ask_order_info
#  - init_modify_order
#  - add_pizza
#  - remove_pizza
#  - add_drink
#  - remove_drink
#  - change_pizza
#  - change_address
#  - change_name
#  - change_time

entities:
- pizza_size
- pizza_type
- drink_name
- drink_amount
- client_name
- order_time
#- pizza_amount
#- toppings
#- client_name
#- phone_number
#- order_number
#- address_street
#- address_number
#- address_city
#- time

slots:
  pizza_size:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: pizza_size
  pizza_type:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: pizza_type
  drink_name:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: drink_name
  drink_amount:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: drink_amount
  client_name:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: client_name
  order_time:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: order_time
  order_ready: #order_ready is a “global slot mappings” https://rasa.com/blog/how-to-use-global-slot-mappings/
    type: bool
    influence_conversation: true
    mappings:
      - type: custom
        action: action_check_order_ready


responses:
  utter_welcome_greet:
  - text: "Hi! This is SmartPizza, your pizza ordering chatbot. How can I help you?"

  utter_goodbye:
  - text: "Thank you for using SmartPizza. See you soon!"

  utter_help:
    - text: "With this bot, you can easily place orders for pizza delivery. Try saying 'I want to order a pizza', or 'Suggest me a pizza' to get started."

  utter_error:
    - text: "Sorry, I am afraid I didn’t understand that. Can you please retype it?"

  utter_submit_pizza:
    - text: "I want to add a {pizza_size} {pizza_type} to your order. Is this correct?"

  utter_submit_drink:
    - text: "I want to add {drink_amount} bottle(s) of {drink_name} to your order. Is this correct?"

  utter_ask_pizza_type:
    - text: "What type of pizza would you like to order?"

  utter_ask_pizza_size:
    - text: "What size would you want to order?"

  utter_ask_drink_name:
    - text: "What drink would you like?"

  utter_ask_drink_amount:
    - text: "How many bottles of {drink_name} you want?"

  utter_give_drink_list:
    - text: "Sure! Here is the list of drinks we offer:"

  utter_accept_request:
    - text: "Sure!"

  utter_anything_else_order:
    - text: "Would you like anything else?"

  utter_topping_and_size_price:
    - text: "Each topping costs 1€ each. A small size costs 2€ less, a large variant costs 2€ more."

  utter_ask_delivery_method:
    - text: "Do you prefer to come pick up your order from our pizzeria or we deliver it at your house?"

  utter_error_order_not_ready:
    - text: "Apologize, but I cannot reference which order you want to check-out. Make an order before expressing your preferred method."

  utter_confirm_order_ready:
    - text: "Ok, I will now ask you some details to check out the order."

  utter_ask_order_time:
    - text: "At what time do you wish to come get your order?"

  utter_ask_client_name:
    - text: "Can you please leave me your full name?"

  utter_submit_pickup:
    - text: "Ok, I am about to register the order for {client_name} at {order_time}. Is this correct?"

  utter_no_user_order:
    - text: "It seems like you have not made an order yet."

  utter_order_saved_pickup:
    - text: "Perfect! Your order was correctly submitted, see you later at the pizzeria!"

  utter_out_of_scope:
    - text: "I'm really sorry, but I am afraid I can't help you with that."

  utter_fallback:
  - text: "I'm sorry, I didn't quite understand that. Could you rephrase?"

actions:
  - action_tell_drink_list
  - action_tell_drink_price
  - validate_pizza_order_form
  - validate_drink_order_form
  - validate_pickup_order_form
  - action_response_positive
  - action_response_negative
  - action_tell_pizza_menu
  - action_tell_pizza_price
  - action_tell_pizza_ingredients
  - action_check_order_ready
  - action_see_order_information

forms:
  pizza_order_form:
    required_slots:
    #- pizza_amount
    - pizza_type
    - pizza_size
  drink_order_form:
    required_slots:
      - drink_name
      - drink_amount
  pickup_form:
    required_slots:
    - order_time
    - client_name

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
