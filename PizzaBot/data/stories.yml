version: "3.1"

#From stories the model learns what the flow of the conversation should look like.
#Start from optimal stories and then make some stories with interruptions and changes
#https://www.youtube.com/watch?v=8gvGh6H2NO0&list=PL75e0qA87dlEjGAc9j9v3a5h1mxI2Z9fi&index=4

#You can use OR statements to trigger the action with multiple intents

#Have small stories that aren't full conversation

stories:

- story: greet help and goodbye
  steps:
  - intent: welcome_greet
  - action: utter_welcome_greet
  - intent: help
  - action: utter_help
  - intent: goodbye
  - action: utter_goodbye

- story: ask for drink list and price
  steps:
  - intent: ask_drink_list
  - action: action_tell_drink_list
  - intent: ask_drink_price
    entities:
    - entity: drink_name
      value: "coke"
  - action: action_tell_drink_price

- story: ask for pizza menu and information on a particular pizza
  steps:
  - intent: ask_pizza_menu
  - action: action_tell_pizza_menu
  - intent: ask_pizza_ingredients
    entities:
    - entity: pizza_type
      value: "pepperoni"
  - action: action_tell_pizza_ingredients
  - intent: ask_pizza_price
    entities:
      - entity: pizza_type
        value: "pepperoni"
  - action: action_tell_pizza_price
#  - checkpoint: pizza_full_information


- story: ask for pizza order
  steps:
  - intent: init_request
  - action: utter_accept_request
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - pizza_size
    - pizza_type
  - active_loop: null
  - action: utter_submit_pizza
  - intent: response_positive
  - action: action_response_positive
  - checkpoint: pizza_added_to_order

- story: add another pizza
  steps:
  - checkpoint: pizza_added_to_order
  - intent: init_request
  - action: utter_accept_request
  - action: pizza_order_form
  - active_loop: pizza_order_form
  - slot_was_set:
    - pizza_size
    - pizza_type
  - active_loop: null
  - action: utter_submit_pizza
  - intent: response_positive
  - action: action_response_positive

- story: ask for drink order
  steps:
  - intent: init_drink_request
  - action: utter_accept_request
  - action: drink_order_form
  - active_loop: drink_order_form
  - slot_was_set:
    - drink_name
    - drink_amount
  - active_loop: null
  - action: utter_submit_drink
  - intent: response_positive
  - action: action_response_positive

- story: User selects pickup option, has an order ready to be checked-out, procede to complete the form (happy path)
  steps:
  - intent: inform_order_pickup
  - slot_was_set:
    - order_ready: true
  - action: utter_confirm_order_ready
  - action: pickup_form
  - active_loop: pickup_form
  - slot_was_set:
      - order_time
      - client_name
  - active_loop: null
  - action: utter_submit_pickup
  - intent: response_positive
  - action: action_response_positive
  - checkpoint: order_complete_pickup

- story: User checks information of his pickup order once complete
  steps:
  - checkpoint: order_complete_pickup
  - intent: ask_order_info
  - slot_was_set:
      - order_ready: true
  - action: action_see_order_information

- story: User provides preferred delivery method, does not have an order ready to be checked-out (unhappy path)
  steps:
  - or:
    - intent: inform_order_pickup
    - intent: inform_order_delivery
  - slot_was_set:
    - order_ready: false
  - action: utter_error_order_not_ready

- story: User checks information of his order but has not made one yet
  steps:
  - intent: ask_order_info
  - slot_was_set:
      - order_ready: false
  - action: utter_no_user_order